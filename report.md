## Разворачиваем 4 виртуальные машины в VBOX

![img.png](Assets/img.png)

Узнаем ip адрес каждой машины с помощью команды <br>
```ip addr```
![img_1.png](Assets/img_1.png)
После чего на одной из разворачиваем ansible server с помощью команды: <br>
``` 
sudo apt update ansible
sudo apt install ansible
```
Далее подключаемся по sftp к нашему ansible server любым удобным способом и конфигурируем рабочую область следующим образом:

![img_2.png](Assets/img_2.png)

Сначала создаем inventory файл, в котором хранятся данные обо всех наших хостах: 

![img_3.png](Assets/img_3.png)

Далее добавляем в основной конфиг данные о расположении inventory и убираем проверку ключей: 

![img_4.png](Assets/img_4.png)

После чего можем создать папки с нужными файлами настроек для всех виртуальных машин:

![img_5.png](Assets/img_5.png)![img_6.png](Assets/img_6.png)![img_7.png](Assets/img_7.png)

Далее создаем файл с переменными, где указаны пути для копирования и вставки файлов конфигураций виртуалок(для каждого хоста свой отдельный файл):
![img_8.png](Assets/img_8.png)![img_9.png](Assets/img_9.png)![img_10.png](Assets/img_10.png)

После чего можно начать работать с playbook:

![img_11.png](Assets/img_11.png)

Для запуска плейбука заходим в директорию в которой он расположен и используем команду: <br>
``` ansible-playbook {имя плейбука} -kK ``` <br>
``` -kK ``` используем для ввода пароля для пароля ssh и пароля прав sudo

![img_12.png](Assets/img_12.png)
Наблюдаем за ходом выполнения плейбука:
![img_13.png](Assets/img_13.png)
Далее можем вручную проверить работу скрипта для отправки запросов через шлюз к серверу:
![img_14.png](Assets/img_14.png)![img_15.png](Assets/img_15.png)
<br>


